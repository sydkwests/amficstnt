<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amfics Transport - Reliable Intercity Travel</title>
    <meta name="description" content="Reliable intercity transport and private chauffeur services across Saudi Arabia. Book comfortable travel to Makkah, Madinah, Jeddah, and more with Amfics Transport.">
    
    <!-- SEO and Social Sharing Meta Tags -->
    <meta property="og:title" content="Amfics Transport - Reliable Intercity Travel">
    <meta property="og:description" content="Reliable intercity transport and private chauffeur services across Saudi Arabia. Book comfortable travel to Makkah, Madinah, Jeddah, and more with Amfics Transport.">
    <meta property="og:image" content="https://images.drive.com.au/driveau/image/upload/c_fill,f_auto,g_auto,h_1080,q_auto:eco,w_1920/v1/cms/uploads/zae0gcehdsesl06yplqu">
    <meta property="og:url" content="https://your-website-url.com">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Amfics Transport - Reliable Intercity Travel">
    <meta name="twitter:description" content="Reliable intercity transport and private chauffeur services across Saudi Arabia.">
    <meta name="twitter:image" content="https://images.drive.com.au/driveau/image/upload/c_fill,f_auto,g_auto,h_1080,q_auto:eco,w_1920/v1/cms/uploads/zae0gcehdsesl06yplqu">


    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"/>
    <style>
        :root {
            --bg-color: #0A0A0A;
            --text-color: #FFFFFF;
            --text-muted-color: #A1A1AA;
            --card-bg: #18181B;
            --dark-card-bg: #27272A;
            --section-bg: #18181B;
            --border-color: #3F3F46;
            --accent-color: #DC2626; /* Red-600 */
            --accent-hover-color: #B91C1C; /* Red-700 */
        }

        .light-mode {
            --bg-color: #FFFFFF;
            --text-color: #0A0A0A;
            --text-muted-color: #52525B;
            --card-bg: #F4F4F5;
            --dark-card-bg: #E4E4E7;
            --section-bg: #F4F4F5;
            --border-color: #D4D4D8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .text-muted { color: var(--text-muted-color); }
        .bg-card { background-color: var(--card-bg); }
        .bg-dark-card { background-color: var(--dark-card-bg); }
        .btn-primary { 
            background-color: var(--accent-color); 
            color: #FFFFFF; 
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(220, 38, 38, 0);
        }
        .btn-primary:hover { 
            background-color: var(--accent-hover-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(220, 38, 38, 0.4);
        }
        .btn-primary:disabled {
            background-color: var(--text-muted-color);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .border-accent { border-color: var(--accent-color); }
        .text-accent { color: var(--accent-color); }
        .section-container {
            border: 1px solid var(--border-color);
            border-radius: 1.5rem; padding: 1.5rem; margin-bottom: 1.5rem;
            background-color: var(--section-bg);
            transition: background-color 0.3s, border-color 0.3s, transform 0.3s;
        }
        @media (min-width: 768px) {
            .section-container {
                padding: 2rem;
                margin-bottom: 2rem;
            }
        }
        
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7);
            display: flex; align-items: center; justify-content: center; z-index: 1000;
            opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s;
        }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-content {
            background: var(--card-bg); padding: 2rem; border-radius: 1rem; border: 1px solid var(--border-color);
            text-align: center; max-width: 500px; width: 90%; transform: scale(0.9); transition: transform 0.3s;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .input-field { background-color: transparent; color: var(--text-color); }
        .light-mode .input-field { color: #121212; }
        .language-dropdown { position: relative; }
        .language-menu {
            position: absolute; top: 100%; right: 0; background-color: var(--card-bg);
            border: 1px solid var(--border-color); border-radius: 0.5rem; margin-top: 0.5rem;
            display: none; z-index: 60;
        }
        .language-menu a { display: block; padding: 0.5rem 1rem; white-space: nowrap; }
        .language-menu a:hover { background-color: var(--dark-card-bg); }
        
        #inquiry-page, #main-content { transition: opacity 0.4s, transform 0.4s; }
        .hidden-page { opacity: 0; transform: scale(0.98); pointer-events: none; }
        
        .form-input {
            background-color: var(--dark-card-bg);
            border: 1px solid var(--border-color);
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
        }
        .form-input.invalid {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.4);
        }
        .choices__inner {
            background-color: var(--dark-card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            min-height: 50px;
        }
        .choices__list--dropdown, .choices__list[aria-expanded] {
            background-color: var(--card-bg);
            border-color: var(--border-color);
            min-width: 250px;
        }
        .choices__item--choice {
            color: var(--text-color);
        }
        .choices__item--choice.is-highlighted {
            background-color: var(--dark-card-bg);
            color: var(--text-color);
        }
        .choices[data-type*="select-one"]::after {
            border-color: var(--text-muted-color) transparent transparent;
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }

        .glass-header {
            background: rgba(24, 24, 27, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(63, 63, 70, 0.5);
        }
        .light-mode .glass-header {
            background: rgba(244, 244, 245, 0.7);
            border: 1px solid rgba(212, 212, 216, 0.5);
        }

        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--dark-card-bg);
            border-top: 5px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .custom-link-hover:hover {
            color: var(--text-muted-color);
        }
        .light-mode .custom-link-hover:hover {
            color: var(--accent-color);
        }
        
        .testimonials-wrapper {
            overflow: hidden;
            position: relative;
            width: 100%;
            -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
            mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
        }
        .testimonials-scroller {
            display: flex;
            width: fit-content;
            animation: scroll 40s linear infinite;
        }
        .testimonials-wrapper:hover .testimonials-scroller {
            animation-play-state: paused;
        }
        .testimonial-card {
            flex-shrink: 0;
            width: 300px;
            margin: 0 1rem;
            padding: 1.5rem;
            border-radius: 1rem;
            background-color: var(--dark-card-bg);
        }
        @keyframes scroll {
            from {
                transform: translateX(0);
            }
            to {
                transform: translateX(-50%);
            }
        }
        
        #whatsapp-fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background-color: #25D366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: transform 0.3s;
            z-index: 100;
        }
        #whatsapp-fab:hover {
            transform: scale(1.1);
        }

        .news-card {
            background-color: var(--dark-card-bg);
            padding: 1.5rem;
            border-radius: 1rem;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease-in-out;
        }
        .news-card:hover {
            transform: translateY(-5px);
        }
        .news-card-content {
            flex-grow: 1;
        }
        .news-card-link {
            color: var(--accent-color);
            font-weight: 600;
            margin-top: 1rem;
            display: inline-block;
        }
        .news-card-link:hover {
            color: var(--accent-hover-color);
        }
        
        .calculator-view {
            transition: opacity 0.3s, transform 0.3s;
        }
        .calculator-view.hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
            position: absolute;
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div id="preloader">
        <div class="spinner"></div>
    </div>

    <!-- Main Content Wrapper -->
    <div id="main-content" class="max-w-7xl mx-auto p-2 sm:p-4 md:p-8 opacity-0">
        <!-- Header -->
        <header class="flex justify-between items-center py-3 px-4 sm:py-4 sm:px-6 glass-header rounded-full mb-8 sticky top-4 z-50">
            <h1 class="text-xl sm:text-2xl font-bold text-accent" data-key="brandName">Amfics Transport</h1>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#home" class="custom-link-hover" data-key="navHome">Home</a>
                <a href="#services" class="custom-link-hover" data-key="navServices">Our Services</a>
                <a href="#fleet" class="custom-link-hover" data-key="navFleet">Our Fleet</a>
                <a href="#support" class="custom-link-hover" data-key="navSupport">Support</a>
            </nav>
            <div class="flex items-center space-x-2 sm:space-x-4">
                <button id="theme-toggle" class="text-xl"><i class="fas fa-sun"></i></button>
                <div class="language-dropdown">
                    <button id="language-toggle" class="flex items-center space-x-2">
                        <img id="current-flag" src="https://placehold.co/24x18/6366f1/ffffff?text=EN" alt="Flag" class="rounded-sm" onerror="this.onerror=null;this.src='https://placehold.co/24x18/cccccc/ffffff?text=FLG';">
                        <span id="current-lang" class="hidden sm:inline">ENG</span>
                        <i class="fas fa-chevron-down text-xs"></i>
                    </button>
                    <div id="language-menu" class="language-menu">
                        <a href="#" class="lang-option flex items-center space-x-2" data-lang="en"><img src="https://placehold.co/24x18/6366f1/ffffff?text=EN" alt="EN Flag" class="rounded-sm" onerror="this.onerror=null;this.src='https://placehold.co/24x18/cccccc/ffffff?text=EN';"> <span>English</span></a>
                        <a href="#" class="lang-option flex items-center space-x-2" data-lang="ar"><img src="https://placehold.co/24x18/007a3d/ffffff?text=AR" alt="AR Flag" class="rounded-sm" onerror="this.onerror=null;this.src='https://placehold.co/24x18/cccccc/ffffff?text=AR';"> <span>العربية</span></a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Section 1: Hero -->
        <div class="section-container animate-on-scroll" id="home">
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="space-y-6 text-center md:text-left">
                    <h2 class="text-4xl sm:text-5xl md:text-7xl font-bold leading-tight text-accent" data-key="heroTitle1">Reliable Travel Across Saudi Arabia</h2>
                    <p class="text-muted" data-key="heroSubtitle">Experience unparalleled comfort and punctuality with our elite fleet. Whether for business or leisure, we provide a seamless travel experience anywhere in the Kingdom.</p>
                    <a href="#fleet" class="btn-primary font-bold py-3 px-8 rounded-lg inline-block" data-key="openFleet">Our Fleet</a>
                </div>
                <div class="overflow-hidden rounded-lg">
                    <img src="assets/images/hero section.jpg" alt="A modern Hyundai Staria, the signature vehicle of Amfics Transport" class="w-full h-full object-cover transition-transform duration-500 ease-in-out hover:scale-110" onerror="this.onerror=null;this.src='https://placehold.co/1920x1080/27272a/ffffff?text=Hyundai+Staria';">
                </div>
            </div>
        </div>

        <!-- Section 2: Services -->
        <div class="section-container animate-on-scroll" id="services">
            <h3 class="text-3xl md:text-4xl font-bold text-center mb-2" data-key="servicesTitle">Our Services</h3>
            <p class="text-muted text-center mb-12 max-w-2xl mx-auto" data-key="servicesSubtitle">Tailored transportation solutions for every journey.</p>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div id="service-ziyarat" class="bg-dark-card p-6 rounded-xl flex flex-col text-center items-center transition-transform duration-300 hover:-translate-y-2">
                    <i class="fas fa-kaaba text-accent text-3xl mb-4"></i>
                    <h4 class="font-bold text-lg mb-2" data-key="service1Title">Ziyarat & Umrah Packages</h4>
                    <p class="text-sm text-muted flex-grow" data-key="service1Desc">All-inclusive, multi-day tours for religious travelers, covering holy sites in Makkah and Madinah.</p>
                </div>
                <div id="service-intercity" class="bg-dark-card p-6 rounded-xl flex flex-col text-center items-center transition-transform duration-300 hover:-translate-y-2">
                    <i class="fas fa-route text-accent text-3xl mb-4"></i>
                    <h4 class="font-bold text-lg mb-2" data-key="service2Title">City-to-City Transfers</h4>
                    <p class="text-sm text-muted flex-grow" data-key="service2Desc">Direct, one-way or round-trip transfers between any two cities in Saudi Arabia. Reliable and comfortable.</p>
                </div>
                <div id="service-hourly" class="bg-dark-card p-6 rounded-xl flex flex-col text-center items-center transition-transform duration-300 hover:-translate-y-2">
                    <i class="fas fa-clock text-accent text-3xl mb-4"></i>
                    <h4 class="font-bold text-lg mb-2" data-key="service3Title">Hourly Chauffeur Service</h4>
                    <p class="text-sm text-muted flex-grow" data-key="service3Desc">A car and driver at your disposal, charged by the hour. Perfect for business meetings or local tours.</p>
                </div>
                <div id="service-custom" class="bg-dark-card p-6 rounded-xl flex flex-col text-center items-center transition-transform duration-300 hover:-translate-y-2">
                    <i class="fas fa-edit text-accent text-3xl mb-4"></i>
                    <h4 class="font-bold text-lg mb-2" data-key="service4Title">Custom Itinerary</h4>
                    <p class="text-sm text-muted flex-grow" data-key="service4Desc">A completely flexible option for any trip that requires special planning. Contact us for a personalized quote.</p>
                </div>
            </div>
             <div class="text-center mt-12">
                <button id="services-inquire-btn" class="btn-primary font-bold py-3 px-8 rounded-lg" data-key="inquireNow">Inquire Now</button>
            </div>
        </div>
        
        <!-- Section 3: "Next Travel" CTA -->
        <div class="section-container animate-on-scroll relative overflow-hidden min-h-[300px] flex items-center">
            <img src="https://images.unsplash.com/photo-1533106418989-88406e768d19?q=80&w=2070&auto=format&fit=crop" alt="Interior of a luxury transport vehicle looking out at a city at night" class="absolute inset-0 w-full h-full object-cover z-0" onerror="this.onerror=null;this.src='https://placehold.co/1200x400/222222/ffffff?text=Travel+in+Style';">
            <div class="absolute inset-0 bg-black bg-opacity-60 z-10"></div>
            <div class="relative z-20 p-8 md:p-12"><h3 class="text-3xl md:text-5xl font-bold text-white mb-4" data-key="nextTravelTitle">Your Next Travel With Us?</h3><p class="text-gray-300 mb-6" data-key="nextTravelSubtitle">Use our online tool to plan your trip and request a custom quote.</p><button id="calculate-now-main-btn" class="btn-primary font-bold py-3 px-8 rounded-lg" data-key="calculateNow">Plan Your Trip</button></div>
        </div>

        <!-- Section 4: Fleet (UPDATED) -->
        <div class="section-container animate-on-scroll" id="fleet">
            <h3 class="text-3xl md:text-4xl font-bold text-center mb-4" data-key="fleetTitle">Our Diverse Fleet</h3>
            <p class="text-muted text-center mb-12 max-w-3xl mx-auto" data-key="fleetSubtitle">We offer a versatile range of modern, comfortable, and well-maintained vehicles to suit every need, from solo executive travel to large family groups.</p>
            
            <div class="flex flex-col items-center">
                <!-- Top Row: 2 Vehicles -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl">
                    <!-- Vehicle 1: Hyundai Staria -->
                    <div class="bg-dark-card rounded-2xl overflow-hidden flex flex-col">
                        <img src="assets/images/fleet 1.jpg" alt="Hyundai Staria" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/27272a/ffffff?text=Hyundai+Staria';">
                        <div class="p-6 flex flex-col flex-grow">
                            <h4 class="font-bold text-xl" data-key="vehicleName1">Hyundai Staria</h4>
                            <p class="text-muted mt-2 text-sm flex-grow" data-key="fleetDesc1">Chosen for its exceptional highway performance, fuel efficiency, and superior passenger comfort, ensuring a smooth journey on all long-distance routes.</p>
                        </div>
                    </div>
                    <!-- Vehicle 2: GMC Yukon -->
                    <div class="bg-dark-card rounded-2xl overflow-hidden flex flex-col">
                        <img src="assets/images/fleet 2.jpg" alt="GMC Yukon" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/27272a/ffffff?text=GMC+Yukon';">
                        <div class="p-6 flex flex-col flex-grow">
                            <h4 class="font-bold text-xl" data-key="vehicleName2">GMC Yukon</h4>
                            <p class="text-muted mt-2 text-sm flex-grow" data-key="fleetDesc2">Combining luxury with rugged capability, the Yukon offers a premium experience with ample space. Perfect for executive travel or family trips.</p>
                        </div>
                    </div>
                </div>

                <!-- Bottom Row: 3 Vehicles -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-8 w-full">
                    <!-- Vehicle 3: Chevrolet Suburban -->
                    <div class="bg-dark-card rounded-2xl overflow-hidden flex flex-col">
                        <img src="assets/images/fleet 3.jpg" alt="Chevrolet Suburban" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/27272a/ffffff?text=Chevrolet+Suburban';">
                        <div class="p-6 flex flex-col flex-grow">
                            <h4 class="font-bold text-xl" data-key="vehicleName3">Chevrolet Suburban</h4>
                            <p class="text-muted mt-2 text-sm flex-grow" data-key="fleetDesc3">The definitive large SUV, providing maximum interior space for larger groups and their belongings without compromising on comfort.</p>
                        </div>
                    </div>
                    <!-- Vehicle 4: Toyota HiAce -->
                    <div class="bg-dark-card rounded-2xl overflow-hidden flex flex-col">
                        <img src="assets/images/fleet 4.jpg" alt="Toyota HiAce" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/27272a/ffffff?text=Toyota+HiAce';">
                        <div class="p-6 flex flex-col flex-grow">
                            <h4 class="font-bold text-xl" data-key="vehicleName4">Toyota HiAce</h4>
                            <p class="text-muted mt-2 text-sm flex-grow" data-key="fleetDesc4">The global standard for group transport, the HiAce is the go-to choice for reliability and efficiency, comfortably accommodating more passengers.</p>
                        </div>
                    </div>
                    <!-- Vehicle 5: Hyundai Starex -->
                    <div class="bg-dark-card rounded-2xl overflow-hidden flex flex-col">
                        <img src="assets/images/fleet 5.jpg" alt="Hyundai Starex" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/27272a/ffffff?text=Hyundai+Starex';">
                        <div class="p-6 flex flex-col flex-grow">
                            <h4 class="font-bold text-xl" data-key="vehicleName5">Hyundai Starex</h4>
                            <p class="text-muted mt-2 text-sm flex-grow" data-key="fleetDesc5">The versatile Starex offers a comfortable and practical solution for group travel. A solid choice for families and tour groups alike.</p>
                        </div>
                    </div>
                </div>

                <!-- CTA Block -->
                <div class="bg-dark-card rounded-2xl flex flex-col md:flex-row items-center justify-between p-8 gap-8 mt-12 w-full">
                    <div class="text-center md:text-left">
                        <h4 class="font-bold text-2xl" data-key="ctaTitle">Looking for Something Else?</h4>
                        <p class="text-muted mt-2" data-key="ctaDesc">We can arrange luxury sedans, buses, or any specific vehicle you require. Contact us to create a custom transport solution.</p>
                    </div>
                    <div class="flex-shrink-0">
                        <button id="fleet-inquire-btn" class="btn-primary font-bold py-3 px-8 rounded-lg whitespace-nowrap" data-key="inquireNow">Inquire Now</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Section 5: Story -->
        <div class="section-container animate-on-scroll" id="story">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-dark-card p-8 rounded-2xl flex flex-col justify-center items-center text-center"><p id="km-counter" class="text-accent text-5xl font-bold" data-target="80000">0</p><p class="text-muted mt-2" data-key="storyCustomers">Kilometers Driven</p></div>
                    <div class="rounded-2xl overflow-hidden h-48 md:h-full"><img src="assets/images/vehicle-potrait.jpg" alt="The professional team at Amfics Transport" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/300x400/666666/ffffff?text=Amfics+Team';"></div>
                    <div class="col-span-2 rounded-2xl overflow-hidden h-48 md:h-64"><img src="assets/images/vehicle-interior.jpg" alt="Comfortable interior of a luxury passenger van" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x300/555555/ffffff?text=Vehicle+Interior';"></div>
                </div>
                <div class="space-y-6"><h3 class="text-3xl md:text-4xl font-bold" data-key="storyTitle">Our Story</h3><p class="text-muted" data-key="storyContent">At Amfics Transport, we redefine luxury travel across the Kingdom of Saudi Arabia. Our foundation is built upon a legacy of trust and excellence, extending from the Amfics brand's established success. We are dedicated to providing a transportation experience that embodies sophistication, punctuality, and unparalleled comfort. Our mission is to ensure every journey with us is seamless and memorable, managed with meticulous attention to detail that sets a new standard in chauffeured services.</p></div>
            </div>
        </div>
        
        <!-- Section 6: Testimonials -->
        <div class="section-container animate-on-scroll" id="testimonials">
            <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" data-key="testimonialsTitle">What Our Clients Say</h3>
            <div class="testimonials-wrapper">
                <div class="testimonials-scroller">
                    <div class="testimonial-card"><p class="text-muted">"The best service in Riyadh! Punctual, professional, and the vehicle was immaculate. Highly recommended for business travel."</p><p class="mt-4 font-bold">- Ahmed L.</p></div>
                    <div class="testimonial-card"><p class="text-muted">"Our family's Umrah trip was made so much easier thanks to Amfics. The driver was patient and knew all the best routes."</p><p class="mt-4 font-bold">- Fatima K.</p></div>
                    <div class="testimonial-card"><p class="text-muted">"I use Amfics for all my airport transfers in Jeddah. They are always reliable, and the booking process is so simple."</p><p class="mt-4 font-bold">- David R.</p></div>
                    <div class="testimonial-card"><p class="text-muted">"Excellent service from Makkah to Madinah. The car was very comfortable for the long journey. Will use again!"</p><p class="mt-4 font-bold">- Aisha M.</p></div>
                    <div class="testimonial-card"><p class="text-muted">"The best service in Riyadh! Punctual, professional, and the vehicle was immaculate. Highly recommended for business travel."</p><p class="mt-4 font-bold">- Ahmed L.</p></div>
                    <div class="testimonial-card"><p class="text-muted">"Our family's Umrah trip was made so much easier thanks to Amfics. The driver was patient and knew all the best routes."</p><p class="mt-4 font-bold">- Fatima K.</p></div>
                    <div class="testimonial-card"><p class="text-muted">"I use Amfics for all my airport transfers in Jeddah. They are always reliable, and the booking process is so simple."</p><p class="mt-4 font-bold">- David R.</p></div>
                    <div class="testimonial-card"><p class="text-muted">"Excellent service from Makkah to Madinah. The car was very comfortable for the long journey. Will use again!"</p><p class="mt-4 font-bold">- Aisha M.</p></div>
                </div>
            </div>
        </div>

        <!-- Section 7: Travel News -->
        <div class="section-container animate-on-scroll" id="travel-news">
            <h3 class="text-3xl md:text-4xl font-bold text-center mb-2" data-key="travelNewsTitle">Latest Saudi Travel News</h3>
            <p class="text-muted text-center mb-12 max-w-2xl mx-auto" data-key="travelNewsSubtitle">Stay updated with the latest stories and guides from around the Kingdom, powered by trusted sources.</p>
            <div id="news-container" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center text-muted py-8 col-span-3" data-key="loadingNews">Loading news...</div>
            </div>
        </div>
        
        <!-- Section 8: FAQ -->
        <div class="section-container animate-on-scroll" id="faq-section">
            <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" data-key="faqTitle">Frequently Asked Questions</h3>
            <div class="max-w-4xl mx-auto space-y-8">
                <!-- FAQ Categories will be dynamically populated by JS -->
            </div>
        </div>

        <!-- Section 9: Support -->
        <div class="section-container animate-on-scroll" id="support">
            <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold mb-2" data-key="supportTitle">Support & Help</h3>
                <p class="text-muted max-w-2xl mx-auto" data-key="supportSubtitle">Have an issue or a question? Fill out the form below and our team will get back to you shortly.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-12 items-start">
                <form id="support-form" class="space-y-6" novalidate>
                    <div>
                        <label for="support-name" class="block text-sm font-medium text-muted" data-key="inquiryName">Full Name <span class="text-accent">*</span></label>
                        <input type="text" id="support-name" required class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field">
                    </div>
                    <div>
                        <label for="support-email" class="block text-sm font-medium text-muted" data-key="inquiryEmail">Email Address <span class="text-accent">*</span></label>
                        <input type="email" id="support-email" required class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field">
                    </div>
                    <div>
                        <label for="support-message" class="block text-sm font-medium text-muted" data-key="supportMessage">Message <span class="text-accent">*</span></label>
                        <textarea id="support-message" rows="4" required class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field"></textarea>
                    </div>
                    <div class="pt-2">
                        <button type="submit" class="w-full btn-primary font-bold py-3 px-8 rounded-lg" data-key="supportSubmit">Submit Request</button>
                    </div>
                </form>
                <div class="space-y-8">
                    <div>
                        <h4 class="text-lg font-bold mb-4" data-key="supportDirectContact">Direct Contact</h4>
                        <div class="space-y-4">
                            <p class="flex items-center"><i class="fas fa-phone text-accent w-6"></i><a href="tel:+966531581434" class="custom-link-hover" data-key="supportPhone">+966 53 158 1434</a></p>
                            <p class="flex items-center"><i class="fas fa-envelope text-accent w-6"></i><a href="mailto:support@amficstransport.com" class="custom-link-hover">support@amficstransport.com</a></p>
                            <p class="flex items-center"><i class="fas fa-map-marker-alt text-accent w-6"></i><span data-key="supportAddress">Jeddah, Saudi Arabia</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Section 10: Footer -->
        <footer class="bg-card rounded-2xl p-8 md:p-12 border border-border-color animate-on-scroll">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <!-- Column 1: Amfics Transport -->
                <div>
                    <h5 class="font-bold mb-4" data-key="brandName">Amfics Transport</h5>
                    <ul class="space-y-2 text-muted">
                        <li><a href="#story" class="custom-link-hover" data-key="navAbout">About Us</a></li>
                        <li><a href="#fleet" class="custom-link-hover" data-key="navFleet">Our Fleet</a></li>
                        <li><a href="#travel-news" class="custom-link-hover" data-key="footerNews">Travel News</a></li>
                        <li><a href="#support" class="custom-link-hover" data-key="footerContact">Contact Us</a></li>
                    </ul>
                </div>
                <!-- Column 2: Our Services -->
                <div>
                    <h5 class="font-bold mb-4" data-key="navServices">Our Services</h5>
                    <ul class="space-y-2 text-muted">
                        <li><a href="#service-intercity" class="custom-link-hover" data-key="service2Title">City-to-City Transfers</a></li>
                        <li><a href="#service-hourly" class="custom-link-hover" data-key="service3Title">Hourly Chauffeur</a></li>
                        <li><a href="#service-ziyarat" class="custom-link-hover" data-key="service1Title">Ziyarat & Umrah</a></li>
                        <li><a href="#service-custom" class="custom-link-hover" data-key="service4Title">Custom Itinerary</a></li>
                    </ul>
                </div>
                <!-- Column 3: Support -->
                <div>
                    <h5 class="font-bold mb-4" data-key="navSupport">Support</h5>
                    <ul class="space-y-2 text-muted">
                        <li><a href="#faq-section" class="custom-link-hover" data-key="supportFAQ">FAQ</a></li>
                        <li><a href="#support" class="custom-link-hover" data-key="footerSupportCenter">Support Center</a></li>
                    </ul>
                </div>
                <!-- Column 4: Legal -->
                 <div>
                    <h5 class="font-bold mb-4" data-key="footerLegal">Legal</h5>
                    <ul class="space-y-2 text-muted">
                        <li><a href="#" onclick="showLegalModal('privacy'); return false;" class="custom-link-hover" data-key="footerPrivacy">Privacy Policy</a></li>
                        <li><a href="#" onclick="showLegalModal('terms'); return false;" class="custom-link-hover" data-key="footerTerms">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-border-color mt-8 pt-6 flex flex-col md:flex-row justify-between items-center text-sm text-muted-color">
                <p>&copy; 2025 <span data-key="brandName">Amfics Transport</span> v2.1</p>
                <div class="flex space-x-4">
                    <!-- IMPORTANT: Replace '#' with your actual social media links -->
                    <a href="#" target="_blank" rel="noopener noreferrer" class="custom-link-hover"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="custom-link-hover"><i class="fab fa-twitter"></i></a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="custom-link-hover"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Inquiry Page (Initially Hidden) -->
    <div id="inquiry-page" class="hidden fixed inset-0 z-50 p-4 sm:p-8 overflow-y-auto hidden-page" style="background-color: var(--bg-color);">
        <div class="max-w-xl mx-auto w-full py-12">
            <h2 class="text-3xl sm:text-4xl font-bold" data-key="inquiryTitle">Inquiry Details</h2>
            <p class="text-muted mb-8" data-key="inquirySubtitle">Let us know your travel needs to get a personalized quote.</p>
            <form id="inquiry-form" class="space-y-6" novalidate>
                 <!-- Section 1: Trip Details -->
                <fieldset class="space-y-4 p-4 border border-border-color rounded-lg">
                    <legend class="text-lg font-semibold px-2" data-key="formSectionTrip">Trip Details</legend>
                    <div>
                        <label for="service-required" class="block text-sm font-medium text-muted" data-key="inquiryService">Service Required <span class="text-accent">*</span></label>
                        <select id="service-required" required class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field">
                        </select>
                    </div>

                    <div id="trip-type-container" class="hidden">
                        <label for="trip-type" class="block text-sm font-medium text-muted" data-key="inquiryTripType">Trip Type <span class="text-accent">*</span></label>
                        <select id="trip-type" class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field">
                            <option value="One-Way" data-key="tripTypeOneWay">One-Way</option>
                            <option value="Return" data-key="tripTypeReturn">Return</option>
                        </select>
                    </div>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                           <label for="date" class="block text-sm font-medium text-muted" data-key="inquiryDate">Date <span class="text-accent">*</span></label>
                           <input type="text" id="date" required class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field" placeholder="Select a date">
                        </div>
                        <div>
                           <label for="time" class="block text-sm font-medium text-muted" data-key="inquiryTime">Pickup Time <span class="text-accent">*</span></label>
                           <input type="text" id="time" required class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field" placeholder="Select a time">
                        </div>
                    </div>
                    
                    <div id="return-date-container" class="hidden">
                        <label for="return-date" class="block text-sm font-medium text-muted" data-key="inquiryReturnDate">Return Date <span class="text-accent">*</span></label>
                        <input type="text" id="return-date" class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field" placeholder="Select a return date">
                    </div>


                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="adults" class="block text-sm font-medium text-muted" data-key="inquiryAdults">Adults <span class="text-accent">*</span></label>
                            <div class="mt-1 flex items-center">
                                <button type="button" class="px-3 py-2 bg-dark-card rounded-l-md" onclick="updatePassengerCount('adults', -1)">-</button>
                                <input type="number" id="adults" min="1" value="1" required class="w-full text-center bg-card py-2 input-field appearance-none">
                                <button type="button" class="px-3 py-2 bg-dark-card rounded-r-md" onclick="updatePassengerCount('adults', 1)">+</button>
                            </div>
                        </div>
                        <div>
                            <label for="children" class="block text-sm font-medium text-muted" data-key="inquiryChildren">Children</label>
                            <div class="mt-1 flex items-center">
                                <button type="button" class="px-3 py-2 bg-dark-card rounded-l-md" onclick="updatePassengerCount('children', -1)">-</button>
                                <input type="number" id="children" min="0" value="0" class="w-full text-center bg-card py-2 input-field appearance-none">
                                <button type="button" class="px-3 py-2 bg-dark-card rounded-r-md" onclick="updatePassengerCount('children', 1)">+</button>
                            </div>
                        </div>
                    </div>

                    <div id="children-ages-container" class="hidden">
                        <label for="children-ages" class="block text-sm font-medium text-muted" data-key="inquiryChildrenAges">Ages of Children</label>
                        <input type="text" id="children-ages" class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field" data-placeholder-key="inquiryChildrenAgesPlaceholder">
                    </div>

                    <div>
                        <label for="notes" class="block text-sm font-medium text-muted" data-key="inquiryNotes">Additional Details</label>
                        <textarea id="notes" rows="3" class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field" data-placeholder-key="inquiryNotesPlaceholder"></textarea>
                    </div>
                </fieldset>
                
                <!-- Section 2: Personal Information -->
                <fieldset class="space-y-4 p-4 border border-border-color rounded-lg">
                    <legend class="text-lg font-semibold px-2" data-key="formSectionContact">Your Information</legend>
                    <div>
                        <label for="name" class="block text-sm font-medium text-muted" data-key="inquiryName">Full Name <span class="text-accent">*</span></label>
                        <input type="text" id="name" required class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field">
                    </div>
                    <div>
                        <label for="whatsapp" class="block text-sm font-medium text-muted" data-key="inquiryWhatsapp">WhatsApp Number <span class="text-accent">*</span></label>
                        <div class="mt-1 flex rounded-md shadow-sm">
                            <div class="w-auto">
                               <select id="countryCode" name="countryCode" class="form-input"></select>
                            </div>
                            <input type="tel" id="whatsapp" required pattern="[0-9]{5,15}" class="flex-grow form-input rounded-r-md py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field" placeholder="501234567">
                        </div>
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-muted" data-key="inquiryEmail">Email Address <span class="text-accent">*</span></label>
                        <input type="email" id="email" required class="mt-1 block w-full form-input rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-accent focus:border-accent input-field">
                    </div>
                </fieldset>

                <!-- Buttons -->
                <div class="flex items-center justify-between pt-4">
                    <button type="button" id="back-btn" class="py-3 px-6 border border-border-color rounded-lg hover:bg-gray-700" data-key="inquiryBack">Back</button>
                    <button type="submit" class="btn-primary font-bold py-3 px-8 rounded-lg" data-key="inquirySubmit">Submit Inquiry</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Universal Calculator Modal -->
    <div id="calculatorModal" class="modal-overlay">
        <div class="modal-content relative overflow-hidden">
            <button id="closeCalculator" class="absolute top-4 right-4 text-muted hover:text-accent text-2xl">&times;</button>
            
            <!-- View 1: Service Selection -->
            <div id="calculator-service-selection" class="calculator-view w-full">
                <h3 class="text-2xl font-bold mb-6" data-key="calculatorTitle">Select a Service</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <button data-service="ziyarat" class="calculator-service-btn bg-dark-card p-4 rounded-lg flex flex-col items-center justify-center hover:bg-gray-700 transition">
                        <i class="fas fa-kaaba text-accent text-2xl mb-2"></i>
                        <span data-key="service1Title">Ziyarat & Umrah</span>
                    </button>
                    <button data-service="hourly" class="calculator-service-btn bg-dark-card p-4 rounded-lg flex flex-col items-center justify-center hover:bg-gray-700 transition">
                        <i class="fas fa-clock text-accent text-2xl mb-2"></i>
                        <span data-key="service3Title">Hourly Chauffeur</span>
                    </button>
                    <button data-service="intercity" class="calculator-service-btn bg-dark-card p-4 rounded-lg flex flex-col items-center justify-center hover:bg-gray-700 transition">
                        <i class="fas fa-route text-accent text-2xl mb-2"></i>
                        <span data-key="service2Title">Intercity Transfer</span>
                    </button>
                    <button data-service="custom" class="calculator-service-btn bg-dark-card p-4 rounded-lg flex flex-col items-center justify-center hover:bg-gray-700 transition">
                        <i class="fas fa-edit text-accent text-2xl mb-2"></i>
                        <span data-key="service4Title">Custom Quote</span>
                    </button>
                </div>
            </div>

            <!-- View 2: Hourly Calculator -->
            <div id="calculator-hourly-view" class="calculator-view hidden w-full">
                <button class="back-to-services-btn absolute top-4 left-4 text-muted hover:text-accent"><i class="fas fa-arrow-left"></i></button>
                <h3 class="text-2xl font-bold mb-4" data-key="service3Title">Hourly Chauffeur</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-muted" data-key="calculatorHours">Number of Hours</label>
                        <div class="mt-1 flex items-center justify-center">
                            <button id="hours-decrement" class="px-4 py-2 bg-dark-card rounded-l-md">-</button>
                            <input id="hours-input" type="number" min="1" value="1" class="w-20 text-center bg-card py-2 input-field">
                            <button id="hours-increment" class="px-4 py-2 bg-dark-card rounded-r-md">+</button>
                        </div>
                    </div>
                    <div class="text-center py-4">
                        <p class="text-muted" data-key="calculatorDuration">Selected Duration:</p>
                        <p id="duration-result" class="text-3xl font-bold text-accent">1 Hour</p>
                    </div>
                </div>
                <div class="mt-6 flex flex-col space-y-3">
                     <button id="request-ride-btn" class="w-full btn-primary font-bold py-3 px-6 rounded-lg" data-key="calculatorRequest">Request This Ride</button>
                </div>
            </div>

            <!-- View 3: Intercity Calculator -->
            <div id="calculator-intercity-view" class="calculator-view hidden w-full">
                <button class="back-to-services-btn absolute top-4 left-4 text-muted hover:text-accent"><i class="fas fa-arrow-left"></i></button>
                <h3 class="text-2xl font-bold mb-4" data-key="service2Title">Intercity Transfer</h3>
                 <div class="grid grid-cols-1 gap-4 mb-4">
                    <div>
                        <label for="modal-from-city" class="block text-sm font-medium text-muted mb-1" data-key="estimatorFrom">From</label>
                        <select id="modal-from-city" class="w-full form-input"></select>
                    </div>
                    <div>
                        <label for="modal-to-city" class="block text-sm font-medium text-muted mb-1" data-key="estimatorTo">To</label>
                        <select id="modal-to-city" class="w-full form-input"></select>
                    </div>
                </div>
                <div id="modal-route-result" class="bg-dark-card rounded-xl p-4 text-center min-h-[100px] flex items-center justify-center">
                     <p class="text-muted" data-key="estimatorSelectRoute">Please select a route.</p>
                </div>
                <div class="mt-6">
                    <button id="book-intercity-trip-btn" class="w-full btn-primary font-bold py-3 px-8 rounded-lg" disabled data-key="estimatorBookNow">Inquire Now</button>
                </div>
            </div>

            <!-- View 4: Ziyarat Packages -->
            <div id="calculator-ziyarat-view" class="calculator-view hidden w-full">
                <button class="back-to-services-btn absolute top-4 left-4 text-muted hover:text-accent"><i class="fas fa-arrow-left"></i></button>
                <h3 class="text-2xl font-bold mb-4" data-key="service1Title">Ziyarat & Umrah Packages</h3>
                <div class="space-y-4 text-left">
                    <!-- Package 1 -->
                    <div class="bg-dark-card p-4 rounded-lg">
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="font-bold">Makkah Ziyarat</h4>
                                <p class="text-sm text-muted">Full day tour of holy sites.</p>
                            </div>
                            <button class="ziyarat-inquire-btn btn-primary px-4 py-2 rounded-lg text-sm" data-package="Makkah Ziyarat Package" data-key="inquireNow">Inquire</button>
                        </div>
                    </div>
                     <!-- Package 2 -->
                    <div class="bg-dark-card p-4 rounded-lg">
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="font-bold">Madinah Ziyarat</h4>
                                <p class="text-sm text-muted">Full day tour of holy sites.</p>
                            </div>
                            <button class="ziyarat-inquire-btn btn-primary px-4 py-2 rounded-lg text-sm" data-package="Madinah Ziyarat Package" data-key="inquireNow">Inquire</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Universal Confirmation/Message Modal -->
    <div id="customModal" class="modal-overlay">
        <div class="modal-content">
             <div id="modal-content-inner">
                <h3 id="modalTitle" class="text-2xl font-bold mb-4"></h3>
                <p id="modalMessage" class="mb-4 whitespace-pre-wrap text-center">Modal message here</p>
            </div>
            <div id="modal-buttons" class="mt-4 flex justify-center space-x-4">
                <button id="closeModal" class="btn-primary font-bold py-2 px-6 rounded-lg" data-key="modalClose">Close</button>
            </div>
        </div>
    </div>

    <!-- WhatsApp Floating Action Button -->
    <a href="https://wa.me/966531581434?text=Hello%20Amfics%20Transport,%20I'd%20like%20to%20inquire%20about%20your%20services." target="_blank" id="whatsapp-fab">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <script>
        // --- Passenger Counter Utility ---
        function updatePassengerCount(field, change) {
            const input = document.getElementById(field);
            if (!input) return;
            let currentValue = parseInt(input.value);
            if (isNaN(currentValue)) currentValue = 0;
            let newValue = currentValue + change;
            if (field === 'adults' && newValue < 1) newValue = 1;
            if (field === 'children' && newValue < 0) newValue = 0;
            input.value = newValue;

            if (field === 'children') {
                toggleChildrenAges(newValue);
            }
        }

        function toggleChildrenAges(count) {
            const container = document.getElementById('children-ages-container');
            const input = document.getElementById('children-ages');
            if (!container || !input) return;

            if (count > 0) {
                container.classList.remove('hidden');
                input.required = true;
            } else {
                container.classList.add('hidden');
                input.required = false;
                input.value = ''; // Clear value if no children
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // --- TRANSLATIONS & STATIC DATA ---
            const legalContent = {
                privacy: {
                    en: {
                        title: "Privacy Policy",
                        content: `Your privacy is important to us. It is Amfics Transport's policy to respect your privacy regarding any information we may collect from you across our website.\n\nWe only ask for personal information when we truly need it to provide a service to you. We collect it by fair and lawful means, with your knowledge and consent. We also let you know why we’re collecting it and how it will be used.\n\nWe only retain collected information for as long as necessary to provide you with your requested service. What data we store, we’ll protect within commercially acceptable means to prevent loss and theft, as well as unauthorized access, disclosure, copying, use or modification.\n\nWe don’t share any personally identifying information publicly or with third-parties, except when required to by law.`
                    },
                    ar: {
                        title: "سياسة الخصوصية",
                        content: `خصوصيتك مهمة بالنسبة لنا. إن سياسة أمفيكس للنقل هي احترام خصوصيتك فيما يتعلق بأي معلومات قد نجمعها منك عبر موقعنا الإلكتروني.\n\nنحن نطلب فقط المعلومات الشخصية عندما نحتاجها حقًا لتقديم خدمة لك. نحن نجمعها بوسائل عادلة وقانونية، بمعرفتك وموافقتك. كما نعلمك لماذا نجمعها وكيف سيتم استخدامها.\n\nنحتفظ بالمعلومات التي تم جمعها فقط طالما كان ذلك ضروريًا لتزويدك بالخدمة المطلوبة. البيانات التي نخزنها، سنحميها ضمن وسائل مقبولة تجاريًا لمنع الفقد والسرقة، وكذلك الوصول غير المصرح به أو الكشف أو النسخ أو الاستخدام أو التعديل.\n\nنحن لا نشارك أي معلومات تعريف شخصية علنًا أو مع أطراف ثالثة، إلا عندما يقتضي القانون ذلك.`
                    }
                },
                terms: {
                    en: {
                        title: "Terms of Service",
                        content: `By accessing this website, you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws.\n\n1. Use License: Permission is granted to temporarily download one copy of the materials on Amfics Transport's website for personal, non-commercial transitory viewing only.\n\n2. Disclaimer: The materials on Amfics Transport's website are provided on an 'as is' basis. Amfics Transport makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.\n\n3. Limitations: In no event shall Amfics Transport or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Amfics Transport's website.`
                    },
                    ar: {
                        title: "شروط الخدمة",
                        content: `من خلال الوصول إلى هذا الموقع، فإنك توافق على الالتزام بشروط الخدمة هذه، وجميع القوانين واللوائح المعمول بها، وتوافق على أنك مسؤول عن الامتثال لأي قوانين محلية معمول بها.\n\n1. ترخيص الاستخدام: يُمنح الإذن بتنزيل نسخة واحدة من المواد مؤقتًا على موقع أمفيكس للنقل للعرض الشخصي وغير التجاري العابر فقط.\n\n2. إخلاء المسؤولية: يتم توفير المواد الموجودة على موقع أمفيكس للنقل على أساس "كما هي". لا تقدم أمفيكس للنقل أي ضمانات، صريحة أو ضمنية، وتخلي بموجب هذا وتنفي جميع الضمانات الأخرى بما في ذلك، على سبيل المثال لا الحصر، الضمانات الضمنية أو شروط القابلية للتسويق أو الملاءمة لغرض معين أو عدم التعدي على الملكية الفكرية أو أي انتهاك آخر للحقوق.\n\n3. القيود: لن تكون أمفيكس للنقل أو مورديها مسؤولين بأي حال من الأحوال عن أي أضرار (بما في ذلك، على سبيل المثال لا الحصر، الأضرار الناجمة عن فقدان البيانات أو الربح، أو بسبب انقطاع الأعمال) الناشئة عن استخدام أو عدم القدرة على استخدام المواد الموجودة على موقع أمفيكس للنقل.`
                    }
                }
            };

            const translations = {
                en: {
                    brandName: "Amfics Transport", supportPhone: "+966 53 158 1434", navSupport: "Support",
                    supportTitle: "Support & Help", supportSubtitle: "Have an issue or a question? Fill out the form below and our team will get back to you shortly.",
                    supportMessage: "Message", supportSubmit: "Submit Request", supportSuccess: "Your support message has been prepared. Please tap 'Send' in WhatsApp to submit it.",
                    errorFieldsRequired: "Please fill out all required fields.", supportDirectContact: "Direct Contact", supportFAQ: "FAQ", supportAddress: "Jeddah, Saudi Arabia",
                    faqTitle: "Frequently Asked Questions",
                    inquireNow: "Inquire Now", inquiryTitle: "Inquiry Details", inquirySubtitle: "Let us know your travel needs to get a personalized quote.", inquiryName: "Full Name", inquiryWhatsapp: "WhatsApp Number", inquiryEmail: "Email Address", inquiryBack: "Back", inquirySubmit: "Submit Inquiry",
                    inquirySuccessTitle: "Redirecting to WhatsApp...", inquirySuccess: "Your inquiry has been prepared. Please tap 'Send' in WhatsApp to submit your request.",
                    errorInvalidEmail: "Please enter a valid email address (e.g., name@example.com).", errorInvalidPhone: "Please enter a valid phone number (e.g., 501234567).",
                    calculatorTitle: "Select a Service", calculatorHours: "Number of Hours", calculatorDuration: "Selected Duration:", calculatorRequest: "Request This Ride",
                    navHome: "Home", navAbout: "About Us", navServices: "Our Services", navFleet: "Our Fleet",
                    heroTitle1: "Reliable Travel Across Saudi Arabia", heroSubtitle: "Experience unparalleled comfort and punctuality with our elite fleet. Whether for business or leisure, we provide a seamless travel experience anywhere in the Kingdom.",
                    openFleet: "Our Fleet",
                    servicesTitle: "Our Services", servicesSubtitle: "Tailored transportation solutions for every journey.",
                    service1Title: "Ziyarat & Umrah Packages", service1Desc: "All-inclusive, multi-day tours for religious travelers, covering holy sites in Makkah and Madinah.",
                    service2Title: "City-to-City Transfers", service2Desc: "Direct, one-way or round-trip transfers between any two cities in Saudi Arabia. Reliable and comfortable.",
                    service3Title: "Hourly Chauffeur Service", service3Desc: "A car and driver at your disposal, charged by the hour. Perfect for business meetings or local tours.",
                    service4Title: "Custom Itinerary", service4Desc: "A completely flexible option for any trip that requires special planning. Contact us for a personalized quote.",
                    storyTitle: "Our Story", storyContent: "At Amfics Transport, we redefine luxury travel across the Kingdom of Saudi Arabia. Our foundation is built upon a legacy of trust and excellence, extending from the Amfics brand's established success. We are dedicated to providing a transportation experience that embodies sophistication, punctuality, and unparalleled comfort. Our mission is to ensure every journey with us is seamless and memorable, managed with meticulous attention to detail that sets a new standard in chauffeured services.",
                    fleetTitle: "Our Diverse Fleet", fleetSubtitle: "We offer a versatile range of modern, comfortable, and well-maintained vehicles to suit every need, from solo executive travel to large family groups.",
                    vehicleName1: "Hyundai Staria", fleetDesc1: "Chosen for its exceptional highway performance, fuel efficiency, and superior passenger comfort, ensuring a smooth journey on all long-distance routes.",
                    vehicleName2: "GMC Yukon", fleetDesc2: "Combining luxury with rugged capability, the Yukon offers a premium experience with ample space. Perfect for executive travel or family trips.",
                    vehicleName3: "Chevrolet Suburban", fleetDesc3: "The definitive large SUV, providing maximum interior space for larger groups and their belongings without compromising on comfort.",
                    vehicleName4: "Toyota HiAce", fleetDesc4: "The global standard for group transport, the HiAce is the go-to choice for reliability and efficiency, comfortably accommodating more passengers.",
                    vehicleName5: "Hyundai Starex", fleetDesc5: "The versatile Starex offers a comfortable and practical solution for group travel. A solid choice for families and tour groups alike.",
                    ctaTitle: "Looking for Something Else?", ctaDesc: "We can arrange luxury sedans, buses, or any specific vehicle you require. Contact us to create a custom transport solution.",
                    nextTravelTitle: "Your Next Travel With Us?", nextTravelSubtitle: "Use our online tool to plan your trip and request a custom quote.", calculateNow: "Plan Your Trip",
                    footerNews: "Travel News", footerContact: "Contact Us", footerSupportCenter: "Support Center", footerTerms: "Terms of Service",
                    footerLegal: "Legal", footerPrivacy: "Privacy Policy", modalClose: "Close",
                    storyCustomers: "Kilometers Driven", storyCustomersValue: "+80k", inquiryService: "Service Required", testimonialsTitle: "What Our Clients Say",
                    travelNewsTitle: "Latest Saudi Travel News", travelNewsSubtitle: "Stay updated with the latest stories and guides from around the Kingdom, powered by trusted sources.",
                    loadingNews: "Loading news...", readMore: "Read More", newsError: "Could not load travel news at this time. Please check back later.",
                    estimatorFrom: "From", estimatorTo: "To", estimatorSelectRoute: "Please select a route.", estimatorBookNow: "Inquire Now",
                    estimatorSelectedRoute: "Selected Route", inquiryDate: "Date", inquiryAdults: "Adults", inquiryChildren: "Children", inquiryNotes: "Additional Details",
                    inquiryNotesPlaceholder: "e.g., specific pickup time, flight number, extra luggage...",
                    inquiryChildrenAges: "Ages of Children",
                    inquiryChildrenAgesPlaceholder: "e.g., 2, 5, 8",
                    formSectionTrip: "Trip Details", formSectionContact: "Your Information",
                    inquiryTime: "Pickup Time", inquiryTripType: "Trip Type", tripTypeOneWay: "One-Way", tripTypeReturn: "Return", inquiryReturnDate: "Return Date"
                },
                ar: {
                    brandName: "أمفيكس للنقل", supportPhone: "٠٥٣١٥٨١٤٣٤ ٩٦٦+", navSupport: "الدعم",
                    supportTitle: "الدعم والمساعدة", supportSubtitle: "هل لديك مشكلة أو سؤال؟ املأ النموذج أدناه وسيقوم فريقنا بالرد عليك قريبًا.",
                    supportMessage: "رسالة", supportSubmit: "إرسال الطلب", supportSuccess: "تم تجهيز رسالة الدعم الخاصة بك. يرجى الضغط على 'إرسال' في واتساب لتقديمها.",
                    errorFieldsRequired: "يرجى ملء جميع الحقول المطلوبة.", supportDirectContact: "الاتصال المباشر", supportFAQ: "أسئلة شائعة", supportAddress: "جدة، المملكة العربية السعودية",
                    faqTitle: "أسئلة مكررة",
                    inquireNow: "استفسر الآن", inquiryTitle: "تفاصيل الاستفسار", inquirySubtitle: "أخبرنا باحتياجات سفرك للحصول على عرض أسعار شخصي.", inquiryName: "الاسم الكامل", inquiryWhatsapp: "رقم الواتساب", inquiryEmail: "البريد الإلكتروني", inquiryBack: "رجوع", inquirySubmit: "إرسال الاستفسار",
                    inquirySuccessTitle: "...جاري التحويل إلى واتساب", inquirySuccess: "تم تجهيز استفسارك. يرجى الضغط على 'إرسال' في واتساب لتقديم طلبك.",
                    errorInvalidEmail: "يرجى إدخال بريد إلكتروني صالح (مثال: name@example.com).", errorInvalidPhone: "يرجى إدخال رقم هاتف صحيح (مثال: 501234567).",
                    calculatorTitle: "اختر خدمة", calculatorHours: "عدد الساعات", calculatorDuration: "المدة المحددة:", calculatorRequest: "اطلب هذه الرحلة",
                    navHome: "الصفحة الرئيسية", navAbout: "من نحن", navServices: "خدماتنا", navFleet: "أسطولنا",
                    heroTitle1: "سفر موثوق عبر المملكة العربية السعودية", heroSubtitle: "جرب راحة لا مثيل لها ودقة في المواعيد مع أسطولنا المتميز. سواء للعمل أو للترفيه، نحن نقدم تجربة سفر سلسة في أي مكان في المملكة.",
                    openFleet: "أسطولنا",
                    servicesTitle: "خدماتنا", servicesSubtitle: "حلول نقل مصممة خصيصًا لكل رحلة.",
                    service1Title: "باقات الزيارة والعمرة", service1Desc: "جولات شاملة لعدة أيام للمسافرين الدينيين، تغطي المواقع المقدسة في مكة والمدينة.",
                    service2Title: "التنقل بين المدن", service2Desc: "تنقلات مباشرة في اتجاه واحد أو ذهابًا وإيابًا بين أي مدينتين في المملكة العربية السعودية. موثوقة ومريحة.",
                    service3Title: "خدمة السائق بالساعة", service3Desc: "سيارة وسائق تحت تصرفك، يتم احتسابها بالساعة. مثالية لاجتماعات العمل أو الجولات المحلية.",
                    service4Title: "مسار رحلة مخصص", service4Desc: "خيار مرن تمامًا لأي رحلة تتطلب تخطيطًا خاصًا. اتصل بنا للحصول على عرض أسعار شخصي.",
                    storyTitle: "قصتنا", storyContent: "في أمفيكس للنقل، نعيد تعريف السفر الفاخر في جميع أنحاء المملكة العربية السعودية. تأسست شركتنا على إرث من الثقة والتميز، يمتد من نجاح علامة أمفيكس التجارية. نحن ملتزمون بتقديم تجربة نقل تجسد الرقي والدقة والراحة التي لا مثيل لها. مهمتنا هي ضمان أن تكون كل رحلة معنا سلسة ولا تُنسى، وتُدار باهتمام دقيق بالتفاصيل يضع معيارًا جديدًا في خدمات السائقين.",
                    storyCustomers: "كيلومترًا مقطوعًا", storyCustomersValue: "+٨٠ ألف",
                    fleetTitle: "أسطولنا المتنوع", fleetSubtitle: "نحن نقدم مجموعة متنوعة من المركبات الحديثة والمريحة والمُصانة جيدًا لتناسب كل الاحتياجات، من السفر التنفيذي الفردي إلى المجموعات العائلية الكبيرة.",
                    vehicleName1: "هيونداي ستاريا", fleetDesc1: "تم اختيارها لأدائها الاستثنائي على الطرق السريعة وكفاءتها في استهلاك الوقود وراحة الركاب الفائقة، مما يضمن رحلة سلسة في جميع الطرق الطويلة.",
                    vehicleName2: "جي إم سي يوكون", fleetDesc2: "يجمع يوكون بين الفخامة والقدرة القوية، ويوفر تجربة ممتازة مع مساحة واسعة. مثالي لسفر رجال الأعمال أو الرحلات العائلية.",
                    vehicleName3: "شيفروليه سوبربان", fleetDesc3: "سيارة الدفع الرباعي الكبيرة والمميزة، توفر أقصى مساحة داخلية للمجموعات الكبيرة وممتلكاتهم دون المساومة على الراحة.",
                    vehicleName4: "تويوتا هايس", fleetDesc4: "المعيار العالمي لنقل المجموعات، هايس هو الخيار الأمثل للموثوقية والكفاءة، ويستوعب المزيد من الركاب بشكل مريح.",
                    vehicleName5: "هيونداي ستاري", fleetDesc5: "تقدم ستاري متعددة الاستخدامات حلاً مريحًا وعمليًا للسفر الجماعي. خيار قوي للعائلات والمجموعات السياحية على حد سواء.",
                    ctaTitle: "هل تبحث عن شيء آخر؟", ctaDesc: "يمكننا ترتيب سيارات السيدان الفاخرة أو الحافلات أو أي مركبة محددة تطلبها. تواصل معنا لإنشاء حل نقل مخصص.",
                    nextTravelTitle: "رحلتك القادمة معنا؟", nextTravelSubtitle: "استخدم أداتنا عبر الإنترنت لتخطيط رحلتك وطلب عرض أسعار مخصص.", calculateNow: "خطط لرحلتك",
                    footerNews: "أخبار السفر", footerContact: "اتصل بنا", footerSupportCenter: "مركز الدعم", footerTerms: "شروط الخدمة",
                    footerLegal: "قانوني", footerPrivacy: "سياسة الخصوصية", modalClose: "إغلاق",
                    inquiryService: "الخدمة المطلوبة", testimonialsTitle: "ماذا يقول عملاؤنا",
                    travelNewsTitle: "آخر أخبار السفر في السعودية", travelNewsSubtitle: "ابق على اطلاع بآخر الأخبار والأدلة السياحية من جميع أنحاء المملكة، مقدمة من مصادر موثوقة.",
                    loadingNews: "جاري تحميل الأخبار...", readMore: "اقرأ المزيد", newsError: "تعذر تحميل أخبار السفر في الوقت الحالي. يرجى المحاولة مرة أخرى لاحقًا.",
                    estimatorFrom: "من", estimatorTo: "إلى", estimatorSelectRoute: "الرجاء تحديد مسار الرحلة.", estimatorBookNow: "استفسر الآن",
                    estimatorSelectedRoute: "المسار المحدد", inquiryDate: "التاريخ", inquiryAdults: "البالغون", inquiryChildren: "الأطفال", inquiryNotes: "تفاصيل إضافية",
                    inquiryNotesPlaceholder: "مثال: وقت الاستلام المحدد، رقم الرحلة، أمتعة إضافية...",
                    inquiryChildrenAges: "أعمار الأطفال",
                    inquiryChildrenAgesPlaceholder: "مثال: ٢، ٥، ٨",
                    formSectionTrip: "تفاصيل الرحلة", formSectionContact: "معلوماتك",
                    inquiryTime: "وقت الاستلام", inquiryTripType: "نوع الرحلة", tripTypeOneWay: "اتجاه واحد", tripTypeReturn: "ذهاب وعودة", inquiryReturnDate: "تاريخ العودة"
                }
            };
            const faqData = {
                en: [
                    { category: "Booking & Payments", key: "faqCat1", questions: [
                        { q: "How do I book a ride?", a: "You can book by using our 'Calculate Now' tool to select your service, or by filling out the inquiry form in our Support section. Our team will then contact you directly to provide a tailored price. For any special requests, we recommend using the inquiry form." },
                        { q: "What payment methods do you accept?", a: "We accept online payments via credit/debit card and direct bank transfers. Cash payment to the driver can also be arranged upon request." },
                        { q: "Is full payment required upfront?", a: "For most trips, a 50% deposit is required to confirm your booking, with the remaining balance due upon completion of the trip. Full prepayment may be required for certain packages." },
                        { q: "What is your cancellation policy?", a: "You can cancel free of charge up to 24 hours before your scheduled pickup time. Cancellations made within 24 hours are subject to a 50% cancellation fee." },
                        { q: "How far in advance should I book?", a: "We recommend booking at least 48 hours in advance to ensure vehicle availability, especially during peak seasons like Ramadan and Hajj." }
                    ]},
                    { category: "Services & Vehicles", key: "faqCat2", questions: [
                        { q: "What vehicle will I be traveling in?", a: "We operate a diverse, modern fleet to suit all needs, including vehicles like the Hyundai Staria, GMC Yukon, Chevrolet Suburban, Toyota HiAce, and Hyundai Starex. The specific vehicle for your trip will be selected to best match your group size, luggage requirements, and travel needs, ensuring a comfortable and reliable journey." },
                        { q: "How many passengers and how much luggage can your vehicle accommodate?", a: "This depends on the vehicle, as our fleet has varied capacities. Large SUVs like the Chevrolet Suburban offer maximum space for bigger groups and their belongings, while our vans like the Toyota HiAce and Hyundai Staria are also excellent for group travel. When you make an inquiry, please provide your exact passenger count and luggage details, and we will ensure the most suitable vehicle is arranged for your comfort." },
                        { q: "Do you provide child car seats?", a: "Yes, we can provide child and infant car seats upon request. Please mention your requirement when making your booking." },
                        { q: "What is included in a Ziyarat package?", a: "Our Ziyarat packages typically include transportation to all major holy sites in Makkah or Madinah with a knowledgeable driver. Specific inclusions can be customized to your needs." }
                    ]},
                    { category: "Pricing & Policies", key: "faqCat3", questions: [
                        { q: "How is the price for an intercity transfer calculated?", a: "The fare is based on the travel time between cities, calculated at a discounted hourly rate, plus a fixed bonus that covers fuel and driver expenses for long-distance travel." },
                        { q: "Are there any hidden fees? Are tolls included?", a: "Our pricing is all-inclusive. The price you are quoted includes fuel, driver fees, and any road tolls. There are no hidden charges." },
                        { q: "What happens if my flight is delayed?", a: "We monitor your flight status. For airport pickups, we offer a complimentary waiting time of up to 60 minutes after your flight has landed." }
                    ]}
                ],
                ar: [
                    { category: "الحجز والدفع", key: "faqCat1", questions: [
                        { q: "كيف أحجز رحلة؟", a: "يمكنك الحجز باستخدام أداة 'احسب الآن' للحصول على تقديرات فورية لجميع خدماتنا، أو عن طريق ملء نموذج الاستفسار في قسم الدعم. لأي طلبات خاصة، نوصي باستخدام نموذج الاستفسار." },
                        { q: "ما هي طرق الدفع المقبولة؟", a: "نقبل الدفع عبر الإنترنت عن طريق بطاقات الائتمان / الخصم والتحويلات البنكية المباشرة. يمكن أيضًا ترتيب الدفع النقدي للسائق عند الطلب." },
                        { q: "هل الدفع الكامل مطلوب مقدمًا؟", a: "بالنسبة لمعظم الرحلات، يلزم إيداع 50٪ لتأكيد الحجز، مع استحقاق الرصيد المتبقي عند إتمام الرحلة. قد يكون الدفع المسبق الكامل مطلوبًا لباقات معينة." },
                        { q: "ما هي سياسة الإلغاء لديكم؟", a: "يمكنك الإلغاء مجانًا حتى 24 ساعة قبل موعد الاستلام المحدد. تخضع عمليات الإلغاء التي تتم في غضون 24 ساعة لرسوم إلغاء بنسبة 50٪." },
                        { q: "كم من الوقت مقدما يجب أن أحجز؟", a: "نوصي بالحجز قبل 48 ساعة على الأقل لضمان توفر السيارة، خاصة خلال مواسم الذروة مثل رمضان والحج." }
                    ]},
                    { category: "الخدمات والمركبات", key: "faqCat2", questions: [
                        { q: "ما هي السيارة التي سأسافر بها؟", a: "نحن نعمل حصريًا بأسطول حديث من سيارات هيونداي ستاريا لضمان مستوى ثابت من الراحة والمساحة والموثوقية لجميع عملائنا." },
                        { q: "كم عدد الركاب وكم الأمتعة التي يمكن أن تستوعبها سيارتكم؟", a: "تتسع هيونداي ستاريا بشكل مريح لما يصل إلى 7 ركاب. لديها مساحة واسعة لحوالي 4-5 حقائب سفر كبيرة والعديد من حقائب اليد الصغيرة." },
                        { q: "هل توفرون مقاعد سيارة للأطفال؟", a: "نعم، يمكننا توفير مقاعد سيارة للأطفال والرضع عند الطلب. يرجى ذكر متطلباتك عند إجراء الحجز." },
                        { q: "ماذا تتضمن باقة الزيارة؟", a: "عادة ما تشمل باقات الزيارة لدينا النقل إلى جميع المواقع المقدسة الرئيسية في مكة أو المدينة مع سائق على دراية. يمكن تخصيص مشتملات محددة حسب احتياجاتك." }
                    ]},
                    { category: "التسعير والسياسات", key: "faqCat3", questions: [
                        { q: "كيف يتم احتساب سعر النقل بين المدن؟", a: "تعتمد الأجرة على وقت السفر بين المدن، محسوبة بسعر ساعة مخفض، بالإضافة إلى مكافأة ثابتة تغطي الوقود ونفقات السائق للسفر لمسافات طويلة." },
                        { q: "هل هناك أي رسوم خفية؟ هل الرسوم مشمولة؟", a: "أسعارنا شاملة كليًا. السعر الذي تم عرضه عليك يشمل الوقود ورسوم السائق وأي رسوم مرور. لا توجد رسوم خفية." },
                        { q: "ماذا يحدث إذا تأخرت رحلتي؟", a: "نحن نراقب حالة رحلتك. بالنسبة لعمليات النقل من المطار، نقدم وقت انتظار مجاني يصل إلى 60 دقيقة بعد هبوط رحلتك." }
                    ]}
                ]
            };


            // --- GLOBAL STATE ---
            const mainContent = document.getElementById('main-content');
            let currentLanguage = 'en';
            let choicesInstance = null;
            let rideDetails = {};

            // --- INITIALIZATION ---
            function init() {
                fetchTravelNews();
                initMainCalculator();
                initFaq();
                populateFaq();
                populateCountryCodes();
                setTheme(localStorage.getItem('theme') || 'dark'); // Default to dark theme
                setLanguage(localStorage.getItem('language') || 'en');
                setupEventListeners();
                
                flatpickr("#date", {
                    altInput: true, altFormat: "F j, Y", dateFormat: "Y-m-d", minDate: "today"
                });
                flatpickr("#time", {
                    enableTime: true, noCalendar: true, dateFormat: "h:i K",
                });
                flatpickr("#return-date", {
                    altInput: true, altFormat: "F j, Y", dateFormat: "Y-m-d", minDate: "today"
                });

                const scrollElements = document.querySelectorAll(".animate-on-scroll");
                const handleScrollAnimation = () => {
                    scrollElements.forEach(el => {
                        if (el.getBoundingClientRect().top <= window.innerHeight / 1.2) {
                            el.classList.add("is-visible");
                        }
                    });
                };
                window.addEventListener("scroll", handleScrollAnimation);
                handleScrollAnimation();

                const kmCounter = document.getElementById('km-counter');
                if (kmCounter) {
                    const observer = new IntersectionObserver((entries) => {
                        if (entries[0].isIntersecting) {
                            animateCounter(kmCounter);
                            observer.unobserve(kmCounter);
                        }
                    }, { threshold: 0.5 });
                    observer.observe(kmCounter);
                }
            }

            // --- UI & PAGE LOGIC ---
            function showInquiryPage(preselectedService = null, rideInfo = null) {
                mainContent.classList.add('hidden-page');
                const inquiryPage = document.getElementById('inquiry-page');
                inquiryPage.classList.remove('hidden', 'hidden-page');
                
                const serviceSelect = document.getElementById('service-required');
                serviceSelect.innerHTML = '';
                const services = [
                    { key: 'service1Title', value: 'Ziyarat & Umrah Packages' },
                    { key: 'service2Title', value: 'City-to-City Transfers' },
                    { key: 'service3Title', value: 'Hourly Chauffeur Service' },
                    { key: 'service4Title', value: 'Custom Itinerary' }
                ];
                services.forEach(service => {
                    const option = document.createElement('option');
                    option.value = service.value;
                    option.textContent = translations[currentLanguage][service.key];
                    serviceSelect.appendChild(option);
                });

                if (preselectedService) {
                    serviceSelect.value = preselectedService;
                }
                
                rideDetails = rideInfo || {};
                toggleConditionalFields(); // Check visibility on page load
                window.scrollTo(0, 0);
            }

            function showMainPage() {
                const inquiryPage = document.getElementById('inquiry-page');
                inquiryPage.classList.add('hidden-page');
                setTimeout(() => {
                    inquiryPage.classList.add('hidden');
                    mainContent.classList.remove('hidden-page');
                }, 400);
            }
            
            function toggleConditionalFields() {
                const service = document.getElementById('service-required').value;
                const tripType = document.getElementById('trip-type').value;
                const tripTypeContainer = document.getElementById('trip-type-container');
                const returnDateContainer = document.getElementById('return-date-container');
                const returnDateInput = document.getElementById('return-date');

                if (service === 'City-to-City Transfers') {
                    tripTypeContainer.classList.remove('hidden');
                    if (tripType === 'Return') {
                        returnDateContainer.classList.remove('hidden');
                        returnDateInput.required = true;
                    } else {
                        returnDateContainer.classList.add('hidden');
                        returnDateInput.required = false;
                    }
                } else {
                    tripTypeContainer.classList.add('hidden');
                    returnDateContainer.classList.add('hidden');
                    returnDateInput.required = false;
                }
            }


            // --- EVENT LISTENERS SETUP ---
            function setupEventListeners() {
                // Smooth scrolling for anchor links
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        const href = this.getAttribute('href');
                        if (href && href.length > 1) {
                            e.preventDefault();
                            const targetElement = document.querySelector(href);
                            if (targetElement) {
                                targetElement.scrollIntoView({ behavior: 'smooth' });
                            }
                        }
                    });
                });

                // Inquiry and page navigation buttons
                document.getElementById('services-inquire-btn')?.addEventListener('click', () => showInquiryPage());
                document.getElementById('fleet-inquire-btn')?.addEventListener('click', () => showInquiryPage('Custom Itinerary'));
                document.getElementById('back-btn')?.addEventListener('click', showMainPage);

                // Form submission handlers
                document.getElementById('inquiry-form')?.addEventListener('submit', handleInquirySubmit);
                document.getElementById('support-form')?.addEventListener('submit', handleSupportSubmit);
                
                // Language dropdown
                document.getElementById('language-toggle')?.addEventListener('click', (e) => {
                    e.stopPropagation();
                    document.getElementById('language-menu').style.display = 'block';
                });
                document.addEventListener('click', () => {
                    document.getElementById('language-menu').style.display = 'none';
                });
                document.querySelectorAll('.lang-option').forEach(o => o.addEventListener('click', (e) => {
                    e.preventDefault();
                    setLanguage(o.dataset.lang);
                }));

                // Theme toggler
                document.getElementById('theme-toggle')?.addEventListener('click', () => {
                    setTheme(document.body.classList.contains('light-mode') ? 'dark' : 'light');
                });

                // Modal close events
                document.getElementById('customModal')?.addEventListener('click', (e) => {
                    if (e.target === e.currentTarget) hideModal('customModal');
                });
                document.getElementById('calculatorModal')?.addEventListener('click', (e) => {
                    if (e.target === e.currentTarget) hideModal('calculatorModal');
                });
                
                // Conditional form fields
                document.getElementById('service-required')?.addEventListener('change', toggleConditionalFields);
                document.getElementById('trip-type')?.addEventListener('change', toggleConditionalFields);

                // Children ages field toggle
                const childrenInput = document.getElementById('children');
                if (childrenInput) {
                    childrenInput.addEventListener('input', (e) => {
                        const count = parseInt(e.target.value, 10);
                        toggleChildrenAges(isNaN(count) ? 0 : count);
                    });
                    // Initial check in case the form is ever re-populated
                    toggleChildrenAges(parseInt(childrenInput.value, 10) || 0);
                }
            }

            // --- FORM HANDLING (NOW WITH WHATSAPP REDIRECT & VALIDATION) ---
            function handleInquirySubmit(e) {
                e.preventDefault();
                const form = e.target;
                const submitButton = form.querySelector('button[type="submit"]');

                // Clear previous validation styles
                form.querySelectorAll('.form-input').forEach(el => el.classList.remove('invalid'));

                // --- Validation ---
                let requiredFields = ['service-required', 'date', 'time', 'adults', 'name', 'whatsapp', 'email'];
                if (!document.getElementById('trip-type-container').classList.contains('hidden')) {
                    requiredFields.push('trip-type');
                }
                if (!document.getElementById('return-date-container').classList.contains('hidden')) {
                    requiredFields.push('return-date');
                }
                const childrenAgesContainer = document.getElementById('children-ages-container');
                if (childrenAgesContainer && !childrenAgesContainer.classList.contains('hidden')) {
                    requiredFields.push('children-ages');
                }
                let firstInvalidField = null;

                for (const fieldId of requiredFields) {
                    const field = document.getElementById(fieldId);
                    if (!field.value) {
                        showModal(translations[currentLanguage].errorFieldsRequired);
                        field.classList.add('invalid');
                        if (!firstInvalidField) firstInvalidField = field;
                    }
                }
                
                const emailField = document.getElementById('email');
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (emailField.value && !emailPattern.test(emailField.value)) {
                    showModal(translations[currentLanguage].errorInvalidEmail);
                    emailField.classList.add('invalid');
                    if (!firstInvalidField) firstInvalidField = emailField;
                }

                const whatsappField = document.getElementById('whatsapp');
                const phonePattern = /^[0-9]{5,15}$/;
                if (whatsappField.value && !phonePattern.test(whatsappField.value)) {
                    showModal(translations[currentLanguage].errorInvalidPhone);
                    whatsappField.classList.add('invalid');
                    if (!firstInvalidField) firstInvalidField = whatsappField;
                }

                if (firstInvalidField) {
                    firstInvalidField.focus();
                    return;
                }
                
                submitButton.disabled = true;
                submitButton.textContent = 'Redirecting...';

                // --- Message Generation ---
                const serviceType = document.getElementById('service-required').value;
                const travelDate = document.getElementById('date').value;
                const pickupTime = document.getElementById('time').value;
                const adults = document.getElementById('adults').value;
                const children = document.getElementById('children').value;
                const childrenAges = document.getElementById('children-ages').value;
                const notes = document.getElementById('notes').value;
                
                let messageBody = `*New Transportation Inquiry*\n\n`;
                messageBody += `*Service:* ${serviceType}\n`;
                
                if (serviceType === 'City-to-City Transfers') {
                    const tripType = document.getElementById('trip-type').value;
                    messageBody += `*Trip Type:* ${tripType}\n`;
                    if (tripType === 'Return') {
                        const returnDate = document.getElementById('return-date').value;
                        if(returnDate) messageBody += `*Return Date:* ${returnDate}\n`;
                    }
                }

                if(travelDate) messageBody += `*Date:* ${travelDate}\n`;
                if(pickupTime) messageBody += `*Time:* ${pickupTime}\n`;
                messageBody += `*Passengers:* ${adults} Adults, ${children} Children\n`;
                if (children > 0 && childrenAges) {
                    messageBody += `*Children's Ages:* ${childrenAges}\n`;
                }
                if (notes) messageBody += `*Notes:* ${notes}\n`;

                if (Object.keys(rideDetails).length > 0) {
                    messageBody += `\n--- Details from Planner ---\n`;
                    if (rideDetails.package) messageBody += `*Package:* ${rideDetails.package}\n`;
                    if (rideDetails.route) messageBody += `*Route:* ${rideDetails.route}\n`;
                    if (rideDetails.duration) messageBody += `*Duration:* ${rideDetails.duration}\n`;
                }
                
                const whatsappUrl = `https://wa.me/966531581434?text=${encodeURIComponent(messageBody)}`;
                window.open(whatsappUrl, '_blank');
                
                showMainPage();
                form.reset();
                if (choicesInstance) choicesInstance.setChoiceByValue('+966');
                showModal(translations[currentLanguage].inquirySuccess, { title: translations[currentLanguage].inquirySuccessTitle });
                
                setTimeout(() => {
                    submitButton.disabled = false;
                    submitButton.textContent = translations[currentLanguage].inquirySubmit;
                }, 1000);
            }

            function handleSupportSubmit(e) {
                e.preventDefault();
                const form = e.target;
                const submitButton = form.querySelector('button[type="submit"]');

                if (!form.checkValidity()) {
                    showModal(translations[currentLanguage].errorFieldsRequired);
                    return;
                }

                submitButton.disabled = true;
                submitButton.textContent = 'Redirecting...';

                const supportMessage = document.getElementById('support-message').value;
                const messageBody = `*New Support Request*\n\n${supportMessage}`;

                const whatsappUrl = `https://wa.me/966531581434?text=${encodeURIComponent(messageBody)}`;
                window.open(whatsappUrl, '_blank');

                form.reset();
                showModal(translations[currentLanguage].supportSuccess);

                setTimeout(() => {
                    submitButton.disabled = false;
                    submitButton.textContent = translations[currentLanguage].supportSubmit;
                }, 1000);
            }

            // --- DYNAMIC CONTENT ---
            async function fetchTravelNews() {
                const newsContainer = document.getElementById('news-container');
                if (!newsContainer) return;

                // Using improved static data as a reliable fallback.
                const staticNews = [
                    {
                        title: "Saudi Arabia to Host Major Global Tourism Forum in Riyadh",
                        link: "#", // Replace with actual URL
                        description: "The Kingdom is set to welcome leaders from the global travel industry to discuss the future of tourism, sustainability, and innovation in the sector."
                    },
                    {
                        title: "New Heritage Sites in AlUla Open to the Public",
                        link: "#", // Replace with actual URL
                        description: "Visitors can now explore newly excavated and restored archaeological sites in the historic AlUla region, offering a deeper glimpse into ancient civilizations."
                    },
                    {
                        title: "Red Sea International Airport Increases Flight Capacity for Upcoming Season",
                        link: "#", // Replace with actual URL
                        description: "In anticipation of a busy tourist season, the airport has expanded its operations, adding new international routes to connect travelers directly to the luxury coastal destination."
                    }
                ];

                try {
                    // INFO: To fetch live news, you would uncomment the code below and sign up for a free API key from a service like newsapi.org
                    /*
                    const API_KEY = 'YOUR_NEWS_API_KEY';
                    const response = await fetch(`https://newsapi.org/v2/everything?q=saudi+arabia+travel&language=${currentLanguage}&apiKey=${API_KEY}`);
                    if (!response.ok) throw new Error('Network response was not ok');
                    const data = await response.json();
                    const articles = data.articles.slice(0, 3);
                    */
                   
                    const articles = staticNews; // Using static news for now.
                    let html = "";
                    articles.forEach(item => {
                        const description = item.description.substring(0, 150) + (item.description.length > 150 ? '...' : '');
                        html += `
                            <div class="news-card">
                                <div class="news-card-content">
                                    <h4 class="font-bold text-lg mb-2">${item.title}</h4>
                                    <p class="text-sm text-muted">${description}</p>
                                </div>
                                <a href="${item.link}" target="_blank" rel="noopener noreferrer" class="news-card-link" data-key="readMore">${translations[currentLanguage].readMore}</a>
                            </div>
                        `;
                    });
                    newsContainer.innerHTML = html;
                    
                    const langData = translations[currentLanguage];
                    if (langData && langData.readMore) {
                         newsContainer.querySelectorAll('.news-card-link[data-key="readMore"]').forEach(el => {
                            el.textContent = langData.readMore;
                        });
                    }

                } catch (error) {
                    console.error("Failed to fetch or display news:", error);
                    newsContainer.innerHTML = `<div class="text-center text-muted py-8 col-span-3" data-key="newsError">${translations[currentLanguage].newsError}</div>`;
                }
            }
            
            function populateFaq() {
                const faqContainer = document.querySelector('#faq-section .max-w-4xl');
                if (!faqContainer) return;

                const langFaqs = faqData[currentLanguage];
                let html = '';
                langFaqs.forEach(category => {
                    html += `
                        <div>
                            <h4 class="text-xl font-bold text-accent mb-4" data-key="${category.key}">${category.category}</h4>
                            <div class="space-y-2">`;
                    category.questions.forEach((item, index) => {
                        html += `
                                <div class="faq-item border-b border-border-color">
                                    <button class="faq-question w-full text-left flex justify-between items-center py-3">
                                        <span>${item.q}</span>
                                        <i class="fas fa-chevron-down transition-transform"></i>
                                    </button>
                                    <div class="faq-answer text-muted">
                                        <div class="pt-2 pb-3 pl-6">${item.a}</div>
                                    </div>
                                </div>`;
                    });
                    html += `</div></div>`;
                });
                faqContainer.innerHTML = html;
            }

            // --- CALCULATOR LOGIC ---
            function initMainCalculator() {
                const modal = document.getElementById('calculatorModal');
                if (!modal) return;

                const serviceSelectionView = document.getElementById('calculator-service-selection');
                const allViews = modal.querySelectorAll('.calculator-view');
                const calculateNowMainBtn = document.getElementById('calculate-now-main-btn');
                
                const showView = (viewToShow) => {
                    allViews.forEach(v => v.classList.add('hidden'));
                    viewToShow.classList.remove('hidden');
                };
                
                calculateNowMainBtn?.addEventListener('click', () => {
                    showView(serviceSelectionView);
                    modal.classList.add('visible');
                });
                
                document.getElementById('closeCalculator')?.addEventListener('click', () => hideModal('calculatorModal'));

                modal.querySelectorAll('.calculator-service-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const service = btn.dataset.service;
                        const viewId = `calculator-${service}-view`;
                        const view = document.getElementById(viewId);
                        if (view) {
                            showView(view);
                        } else if (service === 'custom') {
                            hideModal('calculatorModal');
                            showInquiryPage('Custom Itinerary');
                        }
                    });
                });

                modal.querySelectorAll('.back-to-services-btn').forEach(btn => {
                    btn.addEventListener('click', () => showView(serviceSelectionView));
                });

                // Hourly Calculator
                const hoursInput = document.getElementById('hours-input');
                const durationResult = document.getElementById('duration-result');
                const updateHourlyDuration = () => {
                    let hours = parseInt(hoursInput.value);
                    if (isNaN(hours) || hours < 1) { hours = 1; hoursInput.value = 1; }
                    durationResult.textContent = `${hours} Hour${hours > 1 ? 's' : ''}`;
                };
                document.getElementById('hours-increment')?.addEventListener('click', () => { hoursInput.value++; updateHourlyDuration(); });
                document.getElementById('hours-decrement')?.addEventListener('click', () => { if (hoursInput.value > 1) { hoursInput.value--; updateHourlyDuration(); } });
                hoursInput?.addEventListener('input', updateHourlyDuration);
                document.getElementById('request-ride-btn')?.addEventListener('click', () => {
                    const rideInfo = { duration: hoursInput.value + ' hours' };
                    hideModal('calculatorModal');
                    showInquiryPage('Hourly Chauffeur Service', rideInfo);
                });
                if(hoursInput) updateHourlyDuration();

                // Intercity Calculator
                const intercityRouteData = {
                    'Jeddah': { 'Makkah': {}, 'Madinah': {}, 'Riyadh': {} },
                    'Riyadh': { 'Jeddah': {}, 'Dammam': {}, 'Makkah': {}},
                    'Makkah': { 'Madinah': {}, 'Jeddah': {}, 'Riyadh': {}},
                    'Madinah': { 'Jeddah': {}, 'Makkah': {} },
                    'Dammam': { 'Riyadh': {} }
                };
                const modalFromCity = document.getElementById('modal-from-city');
                const modalToCity = document.getElementById('modal-to-city');
                const modalRouteResult = document.getElementById('modal-route-result');
                const bookIntercityBtn = document.getElementById('book-intercity-trip-btn');
                
                const updateIntercityResult = () => {
                    const fromCity = modalFromCity.value;
                    const toCity = modalToCity.value;
                    if (fromCity && toCity) {
                        modalRouteResult.innerHTML = `<div class="w-full text-center"><p class="text-sm text-muted" data-key="estimatorSelectedRoute">${translations[currentLanguage].estimatorSelectedRoute}</p><p class="text-3xl font-bold text-accent">${fromCity} &rarr; ${toCity}</p></div>`;
                        bookIntercityBtn.disabled = false;
                    } else {
                        modalRouteResult.innerHTML = `<p class="text-muted" data-key="estimatorSelectRoute">${translations[currentLanguage].estimatorSelectRoute}</p>`;
                        bookIntercityBtn.disabled = true;
                    }
                };
                
                const populateIntercityDropdowns = () => {
                    if (!modalFromCity || !modalToCity) return;
                    modalFromCity.innerHTML = `<option value="">${translations[currentLanguage].estimatorFrom}</option>`;
                    Object.keys(intercityRouteData).forEach(city => modalFromCity.innerHTML += `<option value="${city}">${city}</option>`);
                    modalToCity.innerHTML = `<option value="">${translations[currentLanguage].estimatorTo}</option>`;
                };

                modalFromCity?.addEventListener('change', () => {
                    const fromCity = modalFromCity.value;
                    modalToCity.innerHTML = `<option value="">${translations[currentLanguage].estimatorTo}</option>`;
                    if (fromCity && intercityRouteData[fromCity]) {
                        Object.keys(intercityRouteData[fromCity]).forEach(city => modalToCity.innerHTML += `<option value="${city}">${city}</option>`);
                    }
                    updateIntercityResult();
                });
                modalToCity?.addEventListener('change', updateIntercityResult);
                bookIntercityBtn?.addEventListener('click', () => {
                    const fromCity = modalFromCity.value;
                    const toCity = modalToCity.value;
                    if (fromCity && toCity) {
                         const rideInfo = { route: `${fromCity} to ${toCity}`};
                        hideModal('calculatorModal');
                        showInquiryPage('City-to-City Transfers', rideInfo);
                    }
                });
                populateIntercityDropdowns();
                
                // Ziyarat Inquiries
                modal.querySelectorAll('.ziyarat-inquire-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const rideInfo = { package: btn.dataset.package };
                        hideModal('calculatorModal');
                        showInquiryPage('Ziyarat & Umrah Packages', rideInfo);
                    });
                });
            }

            // --- FAQ ACCORDION ---
            function initFaq() {
                const faqContainer = document.getElementById('faq-section');
                faqContainer?.addEventListener('click', function(e) {
                    const question = e.target.closest('.faq-question');
                    if (question) {
                        const answer = question.nextElementSibling;
                        const icon = question.querySelector('i');
                        const isOpening = !answer.style.maxHeight || answer.style.maxHeight === "0px";
                        
                        faqContainer.querySelectorAll('.faq-answer').forEach(ans => {
                            if (ans !== answer) {
                                ans.style.maxHeight = null;
                                ans.previousElementSibling.querySelector('i').style.transform = 'rotate(0deg)';
                            }
                        });
                        
                        if (isOpening) {
                            answer.style.maxHeight = answer.scrollHeight + "px";
                            icon.style.transform = 'rotate(180deg)';
                        } else {
                            answer.style.maxHeight = null;
                            icon.style.transform = 'rotate(0deg)';
                        }
                    }
                });
            }

            // --- UTILITIES ---
            function setLanguage(lang) {
                currentLanguage = lang;
                const langData = translations[lang];
                document.querySelectorAll('[data-key]').forEach(el => {
                    const key = el.getAttribute('data-key');
                    if (langData[key]) el.textContent = langData[key];
                });

                // Update placeholders separately
                document.querySelectorAll('[data-placeholder-key]').forEach(el => {
                    const key = el.getAttribute('data-placeholder-key');
                    if(langData[key]) el.placeholder = langData[key];
                });

                document.documentElement.lang = lang;
                document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
                document.getElementById('current-lang').textContent = lang.toUpperCase();
                document.getElementById('current-flag').src = `https://placehold.co/24x18/${lang==='en'?'6366f1':'007a3d'}/ffffff?text=${lang.toUpperCase()}`;
                localStorage.setItem('language', lang);
                document.getElementById('language-menu').style.display = 'none';
                
                fetchTravelNews(); 
                populateFaq();
                initMainCalculator();
            }

            function setTheme(theme) {
                document.body.classList.toggle('light-mode', theme === 'light');
                document.getElementById('theme-toggle').innerHTML = theme === 'light' ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
                localStorage.setItem('theme', theme);
            }

            function showModal(message, options = {}) {
                const modal = document.getElementById('customModal');
                document.getElementById('modalTitle').textContent = options.title || '';
                document.getElementById('modalTitle').style.display = options.title ? 'block' : 'none';
                document.getElementById('modalMessage').textContent = message;
                document.getElementById('modalMessage').style.textAlign = 'center'; // Default alignment
                const buttonsContainer = document.getElementById('modal-buttons');
                buttonsContainer.innerHTML = ''; 

                const closeButton = document.createElement('button');
                closeButton.className = 'btn-primary font-bold py-2 px-6 rounded-lg';
                closeButton.textContent = translations[currentLanguage].modalClose;
                closeButton.addEventListener('click', () => hideModal('customModal'));
                buttonsContainer.appendChild(closeButton);
                
                modal.classList.add('visible');
            }
            
            // New function for legal content modals
            function showLegalModal(type) {
                const content = legalContent[type][currentLanguage];
                if (!content) return;
                
                showModal(content.content, { title: content.title });
                document.getElementById('modalMessage').style.textAlign = 'left'; // Align legal text to the left
            }
            // Expose the function to the global scope so inline onclick can find it
            window.showLegalModal = showLegalModal;

            function hideModal(modalId) { document.getElementById(modalId).classList.remove('visible'); }

            async function populateCountryCodes() {
                const countryCodeSelect = document.getElementById('countryCode');
                if (!countryCodeSelect) return;
                try {
                    const response = await fetch('https://restcountries.com/v3.1/all?fields=name,idd,cca2');
                    const countries = await response.json();
                    
                    const countryOptions = countries
                        .filter(c => c.idd.root && c.cca2)
                        .map(c => ({
                            value: c.idd.root + (c.idd.suffixes ? c.idd.suffixes[0] : ''),
                            label: `${getFlagEmoji(c.cca2)} ${c.name.common} (${c.idd.root}${c.idd.suffixes ? c.idd.suffixes[0] : ''})`,
                            customProperties: { flag: getFlagEmoji(c.cca2), code: c.idd.root + (c.idd.suffixes ? c.idd.suffixes[0] : '') }
                        })).sort((a, b) => a.label.localeCompare(b.label));

                    if (choicesInstance) choicesInstance.destroy();
                    
                    choicesInstance = new Choices(countryCodeSelect, {
                        choices: countryOptions, itemSelectText: '', searchResultLimit: 10,
                        callbackOnCreateTemplates: function(template) {
                            return {
                                item: ({ classNames }, data) => template(`<div class="${classNames.item} ${data.highlighted ? classNames.highlightedState : classNames.itemSelectable}" data-item data-id="${data.id}" data-value="${data.value}" ${data.active ? 'aria-selected="true"' : ''} ${data.disabled ? 'aria-disabled="true"' : ''}>${data.customProperties.flag} ${data.customProperties.code}</div>`),
                                choice: ({ classNames }, data) => template(`<div class="${classNames.item} ${classNames.itemChoice} ${data.disabled ? classNames.itemDisabled : classNames.itemSelectable}" data-select-text="${this.config.itemSelectText}" data-choice ${data.disabled ? 'data-choice-disabled aria-disabled="true"' : 'data-choice-selectable'} data-id="${data.id}" data-value="${data.value}" ${data.groupId > 0 ? 'role="treeitem"' : 'role="option"'}>${data.label}</div>`),
                            };
                        }
                    });
                    choicesInstance.setChoiceByValue('+966');
                } catch (error) { console.error("Failed to fetch country codes:", error); }
            }
            
            function getFlagEmoji(countryCode) {
                if (!countryCode) return '';
                return String.fromCodePoint(...countryCode.toUpperCase().split('').map(char => 127397 + char.charCodeAt()));
            }

            function animateCounter(counterElement) {
                let current = 0;
                const target = +counterElement.dataset.target;
                const increment = target / 100;
                const update = () => {
                    if(current < target) {
                        current += increment;
                        counterElement.innerText = Math.ceil(current).toLocaleString();
                        requestAnimationFrame(update);
                    } else {
                        counterElement.innerText = target.toLocaleString() + '+';
                    }
                };
                update();
            }

            // --- PAGE LOAD ---
            window.addEventListener('load', () => {
                const preloader = document.getElementById('preloader');
                if(preloader) {
                    preloader.style.opacity = '0';
                    setTimeout(() => {
                        preloader.style.display = 'none';
                        mainContent.style.opacity = '1';
                        init();
                    }, 500);
                } else {
                    mainContent.style.opacity = '1';
                    init();
                }
            });
        });
    </script>
</body>
</html>